---
title: "helpers"
output: rmarkdown::html_vignette
author: "Dave Lovell"
format: "html"
editor: "visual"
vignette: >
  %\VignetteIndexEntry{helpers}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r}
library(carutools)
```

<!-- WARNING - This vignette is generated by {fusen} from dev/flat_helpers.qmd: do not edit by hand -->


# Helper functions
```{r setup}
library(testthat)
```


## range_labels()

```{r examples-range_labels}
range_labels(1:10, width = 3)
range_labels(1:10, width = 3, include = "lower", start = 0, explicit_zero = TRUE)
```



## relabeller()

Creates a function that wraps around `dplry::case_match()` in order to swap specified elements of a character vector. Designed to be passed to the `labels` argument of `ggplot`s `scale_*_discrete()`.

```{r examples-relabeller}
fruits <- c("apple", "pear", "pear", "banana")

fruit_relabel <- relabeller("pear" ~ "orange", "banana" ~ "plum")
fruit_relabel(fruits)

## Normal use case
#' \dontrun{
#' ggplot(palmerpenguins::penguins, aes(x = sex, y = flipper_length_mm)) +
#'   geom_point(alpha = 0.5) +
#'   scale_x_discrete(labels = relabeller("male" ~ "BOY\nPENGUIN", "female" ~ "GIRL\nPENGUIN"))
#' }
```



## tally_delimited_string()

```{r examples-tally_delimited_string}
df <- data.frame(name = c("anna", "betty"),
              fruits = c("apple, banana", "pear, banana, banana"))

tally_delimited_string(df, fruits)

tally_delimited_string(df, fruits, count = TRUE)

tally_delimited_string(df, fruits, count = TRUE, names_repair = toupper)

tally_delimited_string(df, fruits, keep = c("apple", "banana"))

```


